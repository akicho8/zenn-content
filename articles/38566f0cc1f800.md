---
title: "RubyでAtCoderの問題にさくっと挑戦したいときのテンプレートを紹介"
emoji: "📑"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AtCoder", "Ruby"]
published: true
---

## テンプレート

N個の数字を合計する問題のテンプレート例です

```ruby
$stdin = DATA
n = gets.to_i
p gets.split.map(&:to_i).take(n).sum
__END__
3
20 30 50
# >> 100
```

## 解説

- `gets` は標準入力から受け取ると決まっているのではなく `$stdin` から受け取る
- 別に `$stdin` は変更してもよい
- Ruby には `__END__` の下に記述すると `DATA.gets` で順に受けとれるという謎の機能がある
- なので `$stdin` を `DATA` にする
- `gets` は `gets` と書いて `DATA.gets` をしていることになる
- なので __END__ の後のテキストが gets で順に取得できる

ついでに書くと、るびきち先生の rcodetools の xmpfilter を Emacs から xmp で実行すると次のように実行結果がソースコードにコメントとして出ます。

```ruby
# >> 100
```

## 提出 

ちょっとダサいですが `$stdin = DATA` と `__END__` の間の部分だけをコピペして提出します。

```ruby
n = gets.to_i
p gets.split.map(&:to_i).take(n).sum
```

`$stdin = DATA` が実行されないので gets は本当の標準入力から受け取れます。

## 欠点

- `__END__` の下に1つ分の入力しか書けないこと

なお `green_day` という便利ツールを使うと、問題に記載してある入力と出力の例を元に、すべてのテストケースを作ってくれます。

## おわり

実行するたびに毎回自力で入力したり、試行錯誤するときは gets を使わず数値に置き換えるなどとするのは面倒なので、このような方法を取るのが普通なのかなと思っていたのですが、調べても同じような方法が出てこなかったので簡単に紹介しました。
